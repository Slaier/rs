# Trunk :id=trunk

将多条物理链路捆绑在一起成为一条逻辑链路。一个链路聚合组LAG（Link Aggregation Group）的接口分为活动接口、非活动接口。

---

## 转发原理 :id=transmit

+ 根据负载分担方式提取数据帧的源MAC地址、目的MAC地址、源IP地址、目的IP地址、源端口、目标端口
+ 根据HASH算法进行计算，得到HASH-KEY值
+ 根据HASH-KEY值在转发表中查找对应的接口，把数据帧从该接口发送出去

---

## 模式 :id=mode

+ 手工模式
  
  一般情况下，所有链路都是活动链路。所有活动链路均参与数据转发。如果某条活动链路故障，链路聚合组自动在剩余的活动链路中分担流量。

+ LACP模式
  
  一般情况下，部分链路是活动链路。所有活动链路均参与数据转发。如果某条活动链路故障，链路聚合组自动在非活动链路中选择一条链路作为活动链路，参与数据转发的链路数目不变。
  
  + 静态LACP模式
  + 动态LACP模式

---

## LACP :id=lacp

Link Aggregation Control Protocol, [802.3ad](http://www.ieee802.org/3/ad/public/mar99/seaman_1_0399.pdf).

### 优先级 :id=priority

+ 系统LACP优先级

优先级高的为主动端，优先级低的为被动端，被动端根据高优先级的一端来选择活动接口。

+ 接口LACP优先级

优先级高的接口将优先被选为活动接口。

+ 成员接口间M:N备份

由LACP确定聚合组中的活动和非活动链路，M条活动链路与N条备份链路。